pipeline{
    agent any
    environment{
        BRANCH = 'main'
    }
      stage('checkout'){
        steps{
             checkout scmGit(branches: [[name: "${env.BRANCH}"]], 
        extensions: [], userRemoteConfigs : [[credentialsId: 'git-id', 
        url: 'https://github.com/Akash923-ops/my-devops-2024.git']])

        }
      }
       stage('build main'){
        when{
            environment name: BRANCH, value: main
        }
        steps{

         echo "building the app from main branch"
         sh 'ls -lrt'
        }
       }
          stage('build dev'){
            when{
                 environment name: BRANCH, value: dev
            }
             steps{
                echo "build the app from dev branch"
                sh 'ls -lrt'
             }
          }
}